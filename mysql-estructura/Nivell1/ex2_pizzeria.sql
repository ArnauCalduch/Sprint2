-- Comprovem que no existeix ninguna database amb el mateix nom
DROP DATABASE IF EXISTS PIZZERIA
-- Creem la base de dades
CREATE DATABASE PIZZERIA;
-- Utilitzem la base de dades
USE PIZZERIA;
-- Creem les taules

CREATE TABLE PROVINCIES (
	ID_PROVINCIA INT PRIMARY KEY,
	NOM VARCHAR(255)
);

CREATE TABLE LOCALITATS (
	ID_LOCALITAT INT PRIMARY KEY,
	ID_PROVINCIA INT NOT NULL,
	NOM VARCHAR(255),
	FOREIGN KEY (ID_PROVINCIA) REFERENCES PROVINCIES(ID_PROVINCIA)
);

CREATE TABLE ADRECES (
	ID_ADRECA INT PRIMARY KEY,
	ID_LOCALITAT INT NOT NULL,
	CARRER VARCHAR(255) NOT NULL,
	NUMERO INT NOT NULL,
	PIS INT NOT NULL,
	PORTA INT NOT NULL,
	FOREIGN KEY (ID_LOCALITAT) REFERENCES LOCALITATS(ID_LOCALITAT)
);

CREATE TABLE CLIENTS (
	ID_CLIENT INT PRIMARY KEY,
	ID_ADRECA INT NOT NULL,
	NOM VARCHAR(255) NOT NULL,
	COGNOMS VARCHAR(255) NOT NULL,
	CODI_POSTAL INT NOT NULL,
	TELEFON INT NOT NULL,
	FOREIGN KEY (ID_ADRECA) REFERENCES ADRECES(ID_ADRECA)
);

CREATE TABLE BOTIGUES (
	ID_BOTIGA INT PRIMARY KEY,
	ID_ADRECA INT NOT NULL,
	CODI_POSTAL INT NOT NULL,
	FOREIGN KEY (ID_ADRECA) REFERENCES ADRECES(ID_ADRECA)
);

CREATE TABLE EMPLEATS (
	ID_EMPLEAT INT PRIMARY KEY,
	ID_BOTIGA INT NOT NULL,
	NOM VARCHAR(255) NOT NULL,
	COGNOMS VARCHAR(255) NOT NULL,
	NIF VARCHAR(255) NOT NULL,
	TELEFON INT NOT NULL,
	CUINER BOOLEAN,
	REPARTIDOR BOOLEAN,
	FOREIGN KEY (ID_BOTIGA) REFERENCES BOTIGUES(ID_BOTIGA)
);

CREATE TABLE COMANDES (
	ID_COMANDA INT PRIMARY KEY,
	ID_BOTIGA INT NOT NULL,
	ID_REPARTIDOR INT,
	ID_CLIENT INT NOT NULL,
	DATA DATE NOT NULL,
	HORA TIME NOT NULL,
	DOMICILI BOOLEAN NOT NULL,
	HORA_DOMICILI TIME,
	NUM_PIZZES INT NOT NULL,
	NUM_HAMBURGUESES INT NOT NULL,
	NUM_BEGUDES INT NOT NULL,
	PREU FLOAT NOT NULL,
	FOREIGN KEY (ID_BOTIGA) REFERENCES BOTIGUES(ID_BOTIGA),
	FOREIGN KEY (ID_REPARTIDOR) REFERENCES EMPLEATS(ID_EMPLEAT),
	FOREIGN KEY (ID_CLIENT) REFERENCES CLIENTS(ID_CLIENT)
);

CREATE TABLE CATEGORIES (
	ID_CATEGORIA INT PRIMARY KEY,
	NOM VARCHAR(255) NOT NULL
);

CREATE TABLE PRODUCTES (
	ID_PRODUCTE INT PRIMARY KEY,
	ID_CATEGORIA INT,
	TIPUS VARCHAR(255) NOT NULL,
	NOM VARCHAR(255) NOT NULL,
	DESCRIPCIO VARCHAR(255) NOT NULL,
	IMATGE VARCHAR(255) NOT NULL,
	PREU FLOAT NOT NULL,
	FOREIGN KEY (ID_CATEGORIA) REFERENCES CATEGORIES(ID_CATEGORIA)
);

CREATE TABLE DETALLS_COMANDA (
	ID_DETALL INT PRIMARY KEY,
	ID_COMANDA INT NOT NULL,
	ID_PRODUCTE INT NOT NULL,
	FOREIGN KEY (ID_COMANDA) REFERENCES COMANDES(ID_COMANDA),
	FOREIGN KEY (ID_PRODUCTE) REFERENCES PRODUCTES(ID_PRODUCTE)
);

-- Insertem els valors

INSERT INTO PROVINCIES (ID_PROVINCIA,NOM)
VALUES (1,"BARCELONA");

INSERT INTO PROVINCIES (ID_PROVINCIA,NOM)
VALUES (2,"GIRONA");

INSERT INTO PROVINCIES (ID_PROVINCIA,NOM)
VALUES (3,"TARRAGONA");

INSERT INTO PROVINCIES (ID_PROVINCIA,NOM)
VALUES (4,"LLEIDA");



INSERT INTO LOCALITATS (ID_LOCALITAT,ID_PROVINCIA,NOM)
VALUES (1,1,"BARCELONA");

INSERT INTO LOCALITATS (ID_LOCALITAT,ID_PROVINCIA,NOM)
VALUES (2,2,"GIRONA");

INSERT INTO LOCALITATS (ID_LOCALITAT,ID_PROVINCIA,NOM)
VALUES (3,1,"MOIÀ");

INSERT INTO LOCALITATS (ID_LOCALITAT,ID_PROVINCIA,NOM)
VALUES (4,2,"OLOT");

INSERT INTO LOCALITATS (ID_LOCALITAT,ID_PROVINCIA,NOM)
VALUES (5,3,"TARRAGONA");

INSERT INTO LOCALITATS (ID_LOCALITAT,ID_PROVINCIA,NOM)
VALUES (6,4,"SORT");

INSERT INTO LOCALITATS (ID_LOCALITAT,ID_PROVINCIA,NOM)
VALUES (7,3,"AMPOSTA");

INSERT INTO LOCALITATS (ID_LOCALITAT,ID_PROVINCIA,NOM)
VALUES (8,4,"BALAGUER");



INSERT INTO ADRECES (ID_ADRECA,ID_LOCALITAT,CARRER,NUMERO,PIS,PORTA)
VALUES (1,1,"LEIVA",85,3,5);

INSERT INTO ADRECES (ID_ADRECA,ID_LOCALITAT,CARRER,NUMERO,PIS,PORTA)
VALUES (2,1,"ALMERIA",13,2,1);

INSERT INTO ADRECES (ID_ADRECA,ID_LOCALITAT,CARRER,NUMERO,PIS,PORTA)
VALUES (3,1,"VILARDELL",18,0,1);

INSERT INTO ADRECES (ID_ADRECA,ID_LOCALITAT,CARRER,NUMERO,PIS,PORTA)
VALUES (4,1,"PROVENCA",332,0,1);



INSERT INTO CLIENTS (ID_CLIENT,ID_ADRECA,NOM,COGNOMS,CODI_POSTAL,TELEFON)
VALUES (1,1,"ARNAU","CALDUCH RIVAS",08014,620359602);

INSERT INTO CLIENTS (ID_CLIENT,ID_ADRECA,NOM,COGNOMS,CODI_POSTAL,TELEFON)
VALUES (2,2,"NÚRIA","RIVAS BARTOLÍ",08014,756294506);



INSERT INTO BOTIGUES (ID_BOTIGA,ID_ADRECA,CODI_POSTAL)
VALUES (1,3,08014);

INSERT INTO BOTIGUES (ID_BOTIGA,ID_ADRECA,CODI_POSTAL)
VALUES (2,4,08014);



INSERT INTO EMPLEATS (ID_EMPLEAT,ID_BOTIGA,NOM,COGNOMS,NIF,TELEFON,CUINER,REPARTIDOR)
VALUES (1,1,"DANI","RONDA PALASI","68194661Y",619267124,FALSE,TRUE);

INSERT INTO EMPLEATS (ID_EMPLEAT,ID_BOTIGA,NOM,COGNOMS,NIF,TELEFON,CUINER,REPARTIDOR)
VALUES (2,1,"ROGER","TORRENT JIMENEZ","67954282T",625439576,TRUE,FALSE);

INSERT INTO EMPLEATS (ID_EMPLEAT,ID_BOTIGA,NOM,COGNOMS,NIF,TELEFON,CUINER,REPARTIDOR)
VALUES (3,2,"ANNA","RIVAS BARTOLÍ","21044846F",684104105,TRUE,FALSE);

INSERT INTO EMPLEATS (ID_EMPLEAT,ID_BOTIGA,NOM,COGNOMS,NIF,TELEFON,CUINER,REPARTIDOR)
VALUES (4,2,"PETER","BENJAMIN PARKER","92428879K",763600696,FALSE,TRUE);



INSERT INTO COMANDES (ID_COMANDA,ID_BOTIGA,ID_REPARTIDOR,ID_CLIENT,DATA,HORA,DOMICILI,HORA_DOMICILI,NUM_PIZZES,NUM_HAMBURGUESES,NUM_BEGUDES,PREU)
VALUES (1,1,1,1,'2021-03-10','13:21:45',TRUE,'13:36:31',2,0,2,22);

INSERT INTO COMANDES (ID_COMANDA,ID_BOTIGA,ID_REPARTIDOR,ID_CLIENT,DATA,HORA,DOMICILI,HORA_DOMICILI,NUM_PIZZES,NUM_HAMBURGUESES,NUM_BEGUDES,PREU)
VALUES (2,2,NULL,2,'2021-03-11','19:03:20',FALSE,NULL,0,2,2,26.70);



INSERT INTO CATEGORIES (ID_CATEGORIA,NOM)
VALUES (1,"TRADICIONAL");

INSERT INTO CATEGORIES (ID_CATEGORIA,NOM)
VALUES (2,"ESPECIAL");

INSERT INTO CATEGORIES (ID_CATEGORIA,NOM)
VALUES (3,"VEGETARIANA");



INSERT INTO PRODUCTES (ID_PRODUCTE,ID_CATEGORIA,TIPUS,NOM,DESCRIPCIO,IMATGE,PREU)
VALUES (1,1,"PIZZA","PIZZA QUATRE FORMATGES","CLÀSSICA I TRADICIONAL, ELABORADA AMB LA BARREJA DE FORMATGES MOZZARELLA, EMMENTAL, EDAM I FORMATGE BLAU.","PIZZA-4-FORMATGES.JPG",9.50);

INSERT INTO PRODUCTES (ID_PRODUCTE,ID_CATEGORIA,TIPUS,NOM,DESCRIPCIO,IMATGE,PREU)
VALUES (2,2,"PIZZA","PIZZA MALLORQUINA","AMB SOBRASSADA DE MALLORCA I MEL, ACONSEGUIM UN CONTRAST DE SABORS MOLT DESITJABLES AL PALADAR.","PIZZA-MALLORQUINA.JPG",10.50);

INSERT INTO PRODUCTES (ID_PRODUCTE,ID_CATEGORIA,TIPUS,NOM,DESCRIPCIO,IMATGE,PREU)
VALUES (3,3,"PIZZA","PIZZA SPINACI","AMB ESPINACS FRESCOS TROSSEJADES, FORMATGE DE CABRA I UNA MICA DE MEL, AL FINAL, UN COP FORA DEL FORN, INCORPOREM LES NOUS TROSSEJADES.","PIZZA-ESPINACS.JPG",12.50);

INSERT INTO PRODUCTES (ID_PRODUCTE,ID_CATEGORIA,TIPUS,NOM,DESCRIPCIO,IMATGE,PREU)
VALUES (4,NULL,"HAMBURGUESA","HAMBURGUESA AMB FORMATGE","FORMATGE CHEDDAR FOS SOBRE CARN DE BOVÍ, ENCIAM BATAVIA, TOMÀQUET, MAIONESA I PA CLÀSSIC.","CHEESEBURGER.JPG",10.50);

INSERT INTO PRODUCTES (ID_PRODUCTE,ID_CATEGORIA,TIPUS,NOM,DESCRIPCIO,IMATGE,PREU)
VALUES (5,NULL,"HAMBURGUESA","HAMBURGUESA PULLED PORK","CARN DE PORC ESFILAGARSADA SOBRE CARN DE BOVÍ AMB SALSA BBQ, FORMATGE CHEDDAR, TOMÀQUET I ENCIAM BATAVIA. AMB PA CLÀSSIC I SALSA MAIG SMOKED BACON.","PULLED-PORK.JPG",14.50);

INSERT INTO PRODUCTES (ID_PRODUCTE,ID_CATEGORIA,TIPUS,NOM,DESCRIPCIO,IMATGE,PREU)
VALUES (6,NULL,"HAMBURGUESA","HAMBURGUESA AMB BACON","BACÓ, CARN DE BOVÍ, PATATES FREGIDES, BARREJA D'ENCIAMS, TOMÀQUET A RODANXES, MAIONESA I PA CLÀSSIC.","BACON-BURGER.JPG",12.50);

INSERT INTO PRODUCTES (ID_PRODUCTE,ID_CATEGORIA,TIPUS,NOM,DESCRIPCIO,IMATGE,PREU)
VALUES (7,NULL,"BEGUDA","AIGUA","AIGUA FRESCA D'1,5L","AIGUA.JPG",0.50);

INSERT INTO PRODUCTES (ID_PRODUCTE,ID_CATEGORIA,TIPUS,NOM,DESCRIPCIO,IMATGE,PREU)
VALUES (8,NULL,"BEGUDA","COCA-COLA","COCA-COLA NORMAL D'1,5L","COLA.JPG",1.20);

INSERT INTO PRODUCTES (ID_PRODUCTE,ID_CATEGORIA,TIPUS,NOM,DESCRIPCIO,IMATGE,PREU)
VALUES (9,NULL,"BEGUDA","ESTRELLA DAMM","CERVESA ESTRELLA DE 0,25L","ESTRELLA.JPG",1.0);



INSERT INTO DETALLS_COMANDA (ID_DETALL,ID_COMANDA,ID_PRODUCTE)
VALUES (1,1,1);

INSERT INTO DETALLS_COMANDA (ID_DETALL,ID_COMANDA,ID_PRODUCTE)
VALUES (2,1,2);

INSERT INTO DETALLS_COMANDA (ID_DETALL,ID_COMANDA,ID_PRODUCTE)
VALUES (3,1,9);

INSERT INTO DETALLS_COMANDA (ID_DETALL,ID_COMANDA,ID_PRODUCTE)
VALUES (4,1,9);

INSERT INTO DETALLS_COMANDA (ID_DETALL,ID_COMANDA,ID_PRODUCTE)
VALUES (5,2,4);

INSERT INTO DETALLS_COMANDA (ID_DETALL,ID_COMANDA,ID_PRODUCTE)
VALUES (6,2,5);

INSERT INTO DETALLS_COMANDA (ID_DETALL,ID_COMANDA,ID_PRODUCTE)
VALUES (7,2,8);

INSERT INTO DETALLS_COMANDA (ID_DETALL,ID_COMANDA,ID_PRODUCTE)
VALUES (8,2,7);